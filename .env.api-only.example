# ===============================================
# API-ONLY MODE CONFIGURATION
# Для запуска backend без Telegram бота
# Только Cabinet API для Flutter/Web приложений
# ===============================================

# ===== API-ONLY MODE =====
API_ONLY_MODE=true

# ===== TELEGRAM BOT (не требуется в API-only режиме) =====
# В API-only режиме бот не используется, но если хотите в будущем включить:
# BOT_TOKEN=
# ADMIN_IDS=

# ===== ЛИЧНЫЙ КАБИНЕТ (CABINET API) =====
# Включить Cabinet API (обязательно для API-only режима)
CABINET_ENABLED=true

# URL кабинета для ссылок в email
CABINET_URL=http://localhost:8000/cabinet

# Секретный ключ для JWT токенов (обязательно установите!)
# Сгенерируйте: openssl rand -hex 32
CABINET_JWT_SECRET=your-super-secret-jwt-key-min-32-characters-here

# Время жизни токенов
CABINET_ACCESS_TOKEN_EXPIRE_MINUTES=15
CABINET_REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS для Flutter приложения (через запятую)
# Для localhost разработки:
CABINET_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,myapp://

# Включить email регистрацию/вход
CABINET_EMAIL_AUTH_ENABLED=true

# Верификация email (опционально, требует SMTP)
CABINET_EMAIL_VERIFICATION_ENABLED=false

# ===== ТЕСТОВЫЙ EMAIL ДЛЯ РАЗРАБОТКИ =====
# Для тестирования без SMTP
TEST_EMAIL=test@example.com
TEST_EMAIL_PASSWORD=test123

# ===== DATABASE =====
# PostgreSQL (по умолчанию localhost)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=vpn_db
POSTGRES_USER=vpn_user
POSTGRES_PASSWORD=vpn_password_123

# Или полный DATABASE_URL
# DATABASE_URL=******localhost:5432/vpn_db

# ===== REDIS =====
REDIS_URL=redis://localhost:6379/0

# ===== REMNAWAVE API =====
# URL вашей панели RemnaWave
REMNAWAVE_API_URL=https://your-panel.example.com

# API ключ
REMNAWAVE_API_KEY=your_api_key_here

# Тип авторизации: api_key, basic, bearer, cookies, caddy
REMNAWAVE_AUTH_TYPE=api_key

# Для Basic Auth (если используется)
# REMNAWAVE_USERNAME=admin
# REMNAWAVE_PASSWORD=password

# ===== WEB API SERVER =====
# Хост и порт для API сервера
WEB_API_HOST=0.0.0.0
WEB_API_PORT=8000

# Включить Web API (админка)
WEB_API_ENABLED=true

# Токен для доступа к Web API
WEB_API_DEFAULT_TOKEN=your-admin-api-token-here

# ===== ПЛАТЕЖНЫЕ СИСТЕМЫ =====

# YooKassa (СБП + карты)
YOOKASSA_ENABLED=true
YOOKASSA_SHOP_ID=your_shop_id
YOOKASSA_SECRET_KEY=your_secret_key
YOOKASSA_WEBHOOK_PATH=/yookassa-webhook

# Telegram Stars (работает через HTTP API, не требует бота)
TELEGRAM_STARS_ENABLED=true
TELEGRAM_STARS_RATE_RUB=1.79

# CryptoBot (опционально)
CRYPTOBOT_ENABLED=false
# CRYPTOBOT_TOKEN=

# Другие платежные системы...
# TRIBUTE_ENABLED=false
# MULENPAY_ENABLED=false
# HELEKET_ENABLED=false

# ===== TRIAL SUBSCRIPTION =====
# Настройки триал периода
TRIAL_ENABLED=true
TRIAL_DURATION_DAYS=3
TRIAL_TRAFFIC_LIMIT_GB=5
TRIAL_DEVICE_LIMIT=2

# Требовать подписку на канал для триала (отключено в API-only)
CHANNEL_IS_REQUIRED_SUB=false

# ===== SUBSCRIPTION SETTINGS =====
# Режим подписок: free_form, tariff_mode
SUBSCRIPTION_MODE=tariff_mode

# Настройки трафика
TRAFFIC_PACKAGES_CONFIG=10:100:true,25:200:true,50:350:true,100:600:true

# ===== PRICING =====
# Цены за периоды (в копейках)
PERIOD_PRICES={"7": 15000, "14": 25000, "30": 40000, "60": 70000, "90": 100000}

# ===== REFERRAL PROGRAM =====
REFERRAL_PROGRAM_ENABLED=true
REFERRAL_COMMISSION_PERCENT=25
REFERRAL_MINIMUM_TOPUP_KOPEKS=10000

# ===== LOGGING =====
LOG_LEVEL=INFO
LOG_FILE=logs/api.log

# Ротация логов
LOG_ROTATION_ENABLED=true
LOG_ROTATION_TIME=00:00
LOG_ROTATION_KEEP_DAYS=7

# Отправка логов в Telegram (отключено в API-only)
LOG_ROTATION_SEND_TO_TELEGRAM=false

# ===== SMTP (для email уведомлений) =====
# Опционально, если хотите отправлять email
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=VPN Service
SMTP_USE_TLS=true

# ===== TIMEZONE =====
TIMEZONE=Europe/Moscow

# ===== ADMIN NOTIFICATIONS (отключено в API-only) =====
ADMIN_NOTIFICATIONS_ENABLED=false
ADMIN_REPORTS_ENABLED=false

# ===== FEATURES (отключено в API-only) =====
# Эти функции требуют Telegram бота
SUPPORT_MENU_ENABLED=false
CONTESTS_ENABLED=false
TRAFFIC_MONITORING_ENABLED=false

# ===== SYNC SERVICES =====
# Автосинхронизация с RemnaWave
REMNAWAVE_SYNC_ENABLED=true
REMNAWAVE_SYNC_SCHEDULE=00:00,12:00

# ===== BACKUP =====
# Автобекапы базы данных
BACKUP_ENABLED=false
# BACKUP_INTERVAL_HOURS=24
# BACKUP_TIME=03:00

# ===== DEVELOPMENT =====
# Пропустить миграции (для быстрого запуска)
# SKIP_MIGRATION=false

# Разрешить ошибки миграций
# ALLOW_MIGRATION_FAILURE=false

# ===============================================
# БЫСТРЫЙ СТАРТ
# ===============================================
#
# 1. Установите PostgreSQL и Redis:
#    docker run -d --name vpn-postgres -p 5432:5432 \
#      -e POSTGRES_DB=vpn_db \
#      -e POSTGRES_USER=vpn_user \
#      -e POSTGRES_PASSWORD=vpn_password_123 \
#      postgres:15
#
#    docker run -d --name vpn-redis -p 6379:6379 redis:7-alpine
#
# 2. Установите зависимости:
#    pip install -r requirements.txt
#
# 3. Скопируйте этот файл в .env:
#    cp .env.api-only .env
#
# 4. Настройте параметры (CABINET_JWT_SECRET, REMNAWAVE_API_URL, и т.д.)
#
# 5. Запустите миграции:
#    alembic upgrade head
#
# 6. Запустите backend:
#    python main.py
#
# 7. API доступен на:
#    http://localhost:8000/cabinet
#    http://localhost:8000/docs (Swagger UI)
#
# ===============================================
